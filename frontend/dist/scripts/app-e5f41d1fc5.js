/******/!function(e){function t(a){if(n[a])return n[a].exports;var i=n[a]={exports:{},id:a,loaded:!1};return e[a].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}// webpackBootstrap
/******/
var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var a=n(1),i=n(2),o=n(3),r=n(4),s=n(5),l=n(6),c=n(7),d=n(8),u=n(9),p=n(10);angular.module("frontend",["ngSanitize","ngMessages","ngResource","ngRoute","ui.bootstrap","toastr"]).config(a.config).config(i.routerConfig).run(o.runBlock).service("incomeService",c.IncomeService).service("expenseService",p.ExpenseService).service("authenticationService",s.AuthenticationService).controller("MainController",r.MainController).controller("authController",l.AuthenticationController).controller("dashController",d.DashboardController).directive("acmeNavbar",u.NavbarDirective)},function(e,t){"use strict";function n(e,t){"ngInject";e.debugEnabled(!0),t.allowHtml=!0,t.timeOut=3e3,t.positionClass="toast-top-right",t.preventDuplicates=!0,t.progressBar=!0}n.$inject=["$logProvider","toastrConfig"],Object.defineProperty(t,"__esModule",{value:!0}),t.config=n},function(e,t){"use strict";function n(e){"ngInject";e.when("/",{templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main"}).when("/login",{templateUrl:"app/components/authentication/login.html",controller:"authController",controllerAs:"auth"}).when("/register",{templateUrl:"app/components/authentication/register.html",controller:"authController",controllerAs:"auth"}).when("/dashboard",{templateUrl:"app/components/dashboard/dashboard.html",controller:"dashController",controllerAs:"dash"}).otherwise({redirectTo:"/"})}n.$inject=["$routeProvider"],Object.defineProperty(t,"__esModule",{value:!0}),t.routerConfig=n},function(e,t){"use strict";function n(e){"ngInject";e.debug("runBlock end")}n.$inject=["$log"],Object.defineProperty(t,"__esModule",{value:!0}),t.runBlock=n},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});t.MainController=function a(){"ngInject";n(this,a)}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();t.AuthenticationService=function(){function e(t){"ngInject";n(this,e),this.$http=t,this.apiRegister="https://backend-api-pragmatio.herokuapp.com/api/auth/register/",this.apiLogin="https://backend-api-pragmatio.herokuapp.com/api/auth/login/"}return e.$inject=["$http"],a(e,[{key:"register",value:function(e,t){var n={email:e,password:t};return this.$http.post(this.apiRegister,n)}},{key:"login",value:function(e,t){var n={email:e,password:t};return this.$http.post(this.apiLogin,n)}}]),e}()},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();t.AuthenticationController=function(){function e(t,a,i,o){"ngInject";n(this,e),this.email="",this.password="",this.$log=t,this.authenticationService=o,this.$location=a,this.toastr=i}return e.$inject=["$log","$location","toastr","authenticationService"],a(e,[{key:"showToastr",value:function(e){this.toastr.info(e)}},{key:"register",value:function(){var e=this;this.authenticationService.register(this.email,this.password).then(function(t){localStorage.setItem("token",t.data.token),e.$location.path("/dashboard")})["catch"](function(t){e.showToastr("registration failed! Please try another email address!"),e.$log.error("Registration failed\n"+angular.toJson(t.data,!0))})}},{key:"login",value:function(){var e=this;this.authenticationService.login(this.email,this.password).then(function(t){localStorage.setItem("token",t.data.token),e.$location.path("/dashboard")})["catch"](function(t){e.showToastr("Incorrect credentials!"),e.$log.error("Login failed\n"+angular.toJson((t.data,!0)))})}}]),e}()},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();t.IncomeService=function(){function e(t){"ngInject";n(this,e),this.token="token",this.$http=t,this.apiIncomes="https://backend-api-pragmatio.herokuapp.com/api/me/income/"}return e.$inject=["$http"],a(e,[{key:"getIncomes",value:function(){return this.setAuthorization(),this.$http.get(this.apiIncomes)}},{key:"saveIncome",value:function(e){return this.setAuthorization(),this.$http.post(this.apiIncomes,e)}},{key:"updateIncome",value:function(e,t){return this.setAuthorization(),this.$http.post(this.apiIncomes+e,t)}},{key:"deleteIncome",value:function(e){return this.setAuthorization(),this.$http["delete"](this.apiIncomes+e)}},{key:"getToken",value:function(){return localStorage.getItem(this.token)}},{key:"setAuthorization",value:function(){var e=this.getToken();e&&(this.$http.defaults.headers.common.Authorization="Bearer "+e)}}]),e}()},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();t.DashboardController=function(){function e(t,a,i,o,r,s){"ngInject";n(this,e),this.incomeService=r,this.expenseService=s,this.$log=t,this.$location=a,this.toastr=o,this.noteUrl="notePopover.html",this.incomeList=[],this.expenseList=[],this.getIncomes(),this.getExpenses(),this.type="Select type",this.isAddingIncome=null,this.isAddingExpense=null,this.tableData={id:null,description:"",category:1,amount:10},this.noteData={text:"",expenseId:null},this.isVisible=!1}return e.$inject=["$log","$location","$rootScope","toastr","incomeService","expenseService"],a(e,[{key:"showToastr",value:function(e){this.toastr.info(e)}},{key:"getIncomes",value:function(){var e=this;this.incomeService.getIncomes().then(function(t){e.incomeList=t.data||[]})["catch"](function(t){localStorage.clear(),e.$log.error("Getting incomes failed\n"+angular.toJson(t.data,!0)),e.$location.path("/")})}},{key:"getExpenses",value:function(){var e=this;this.expenseService.getExpenses().then(function(t){e.expenseList=t.data})["catch"](function(t){localStorage.clear(),e.$log.error("Getting expenses failed\n"+angular.toJson(t.data,!0)),e.$location.path("/")})}},{key:"setOnAddingIncome",value:function(){this.isVisible=!0,this.isAddingIncome=!0,this.type="Adding Income",this.tableData.id=null,this.tableData.description="",this.tableData.category=1,this.tableData.amount=0}},{key:"setOnUpdatingIncome",value:function(e){this.isVisible=!0,this.isAddingIncome=!1,this.type="Updating Income",this.tableData.id=e.id,this.tableData.description=e.description,this.tableData.category=parseInt(e.category),this.tableData.amount=parseFloat(e.amount)}},{key:"setOnAddingExpense",value:function(){this.isVisible=!0,this.isAddingExpense=!0,this.type="Adding Expense",this.tableData.id=null,this.tableData.description="",this.tableData.category=1,this.tableData.amount=0}},{key:"setOnUpdatingExpense",value:function(e){this.isVisible=!0,this.isAddingExpense=!1,this.type="Updating Income",this.tableData.id=e.id,this.tableData.description=e.description,this.tableData.category=parseInt(e.category),this.tableData.amount=parseFloat(e.amount)}},{key:"addNewIncome",value:function(){var e=this;this.incomeService.saveIncome(this.tableData).then(function(){e.getIncomes(),e.setBackData()})["catch"](function(t){localStorage.clear(),localStorage.clear(),e.$log.error("Adding income failed\n"+angular.toJson(t.data,!0)),e.$location.path("/")})}},{key:"updateIncome",value:function(){var e=this;this.incomeService.updateIncome(this.tableData.id,this.tableData).then(function(){e.getIncomes(),e.setBackData()})["catch"](function(t){localStorage.clear(),e.$log.error("Updating income failed\n"+angular.toJson(t.data,!0)),e.$location.path("/")})}},{key:"addNewExpense",value:function(){var e=this;this.expenseService.saveExpense(this.tableData).then(function(){e.getExpenses(),e.setBackData()})["catch"](function(t){localStorage.clear(),e.$log.error("Adding expense failed\n"+angular.toJson(t.data,!0)),e.$location.path("/")})}},{key:"updateExpense",value:function(){var e=this;this.expenseService.updateExpense(this.tableData.id,this.tableData).then(function(){e.getExpenses(),e.setBackData()})["catch"](function(t){localStorage.clear(),e.$log.error("Updating expense failed\n"+angular.toJson(t.data,!0)),e.$location.path("/")})}},{key:"submit",value:function(){this.validateData()&&(null!=this.isAddingIncome?this.isAddingIncome?this.addNewIncome():this.updateIncome():null!=this.isAddingExpense&&(this.isAddingExpense?this.addNewExpense():this.updateExpense()))}},{key:"deleteIncome",value:function(e){var t=this;this.incomeService.deleteIncome(e.id).then(function(){t.getIncomes(),t.setBackData()})["catch"](function(e){localStorage.clear(),t.$log.error("Deleting income failed\n"+angular.toJson(e.data,!0)),t.$location.path("/")})}},{key:"deleteExpense",value:function(e){var t=this;this.expenseService.deleteExpense(e.id).then(function(){t.getExpenses(),t.setBackData()})["catch"](function(e){localStorage.clear(),t.$log.error("Deleting expense failed\n"+angular.toJson(e.data,!0)),t.$location.path("/")})}},{key:"validateData",value:function(){return""==this.tableData.description?(this.showToastr("Type in description!"),!1):this.tableData.category<1||this.tableData.category>9?(this.showToastr("Category has to be between 1 and 9 including 1 and 9!"),!1):this.tableData.amount<0?(this.showToastr("Amount can not be below 10!"),!1):!0}},{key:"setBackData",value:function(){this.isVisible=!1,this.type="Select type",this.isAddingIncome=null,this.isAddingExpense=null,this.tableData={id:null,description:"",category:1,amount:0}}},{key:"setOnAddingNote",value:function(e){this.noteData.expenseId=e}},{key:"resetOnAddingNote",value:function(){this.noteData.expenseId=null,this.noteData.text=""}},{key:"addNote",value:function(){var e=this;""!=this.noteData.text&&this.expenseService.addNote(this.noteData.expenseId,this.noteData).then(function(){e.getExpenses(),e.resetOnAddingNote()})["catch"](function(t){localStorage.clear(),e.$log.error("Adding note failed\n"+angular.toJson(t.data,!0)),e.$location.path("/")})}},{key:"logout",value:function(){localStorage.clear(),this.$location.path("/")}}]),e}()},function(e,t){"use strict";function n(){var e={restrict:"E",templateUrl:"app/components/navbar/navbar.html"};return e}Object.defineProperty(t,"__esModule",{value:!0}),t.NavbarDirective=n},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();t.ExpenseService=function(){function e(t){"ngInject";n(this,e),this.token="token",this.forNote="/note/",this.$http=t,this.apiExpenses="https://backend-api-pragmatio.herokuapp.com/api/me/expense/"}return e.$inject=["$http"],a(e,[{key:"getExpenses",value:function(){return this.setAuthorization(),this.$http.get(this.apiExpenses)}},{key:"saveExpense",value:function(e){return this.setAuthorization(),this.$http.post(this.apiExpenses,e)}},{key:"updateExpense",value:function(e,t){return this.setAuthorization(),this.$http.post(this.apiExpenses+e,t)}},{key:"deleteExpense",value:function(e){return this.setAuthorization(),this.$http["delete"](this.apiExpenses+e)}},{key:"addNote",value:function(e,t){return this.setAuthorization(),this.$http.post(this.apiExpenses+e+this.forNote,t)}},{key:"getToken",value:function(){return localStorage.getItem(this.token)}},{key:"setAuthorization",value:function(){var e=this.getToken();e&&(this.$http.defaults.headers.common.Authorization="Bearer "+e)}}]),e}()}]),angular.module("frontend").run(["$templateCache",function(e){e.put("app/main/main.html",'<div class="center-block media-middle container" style="display: block; margin-left: auto; margin-right: auto"><div><acme-navbar></div><div class="jumbotron text-center"><h2 class="navbar-brand text-center">Welcome to Budget Tracker</h2><br><p class=lead><img width=100px height=100px src=assets/images/appIcon.png alt="I am Budget Tracker"><br></p></div></div>'),e.put("app/components/authentication/login.html",'<div class=container style="display: block; margin-left: auto; margin-right: auto"><nav class="navbar navbar-static-top navbar-inverse"><div class=navbar-brand></nav><div class="col-md-6 col-md-offset-3"><h2>Login:</h2><form name=form ng-submit=auth.login() role=form><div class=form-group ng-class="{ \'has-error\': form.email.$dirty && form.email.$error.required }"><label for=emailLogin>Email</label><input type=email name=emailLogin id=emailLogin ng-model=auth.email class=form-control required> <span ng-show="form.email.$dirty && form.email.$error.required" class=help-block>Email is required</span></div><div class=form-group ng-class="{ \'has-error\': form.password.$dirty && form.password.$error.required }"><label for=passwordLogin>Password</label><input type=password name=passwordLogin id=passwordLogin ng-model=auth.password class=form-control required> <span ng-show="form.password.$dirty && form.password.$error.required" class=help-block>Password is required</span></div><div class=form-actions><button type=submit class="btn btn-primary">Login</button> <a href=#/ class="btn btn-link">Back</a></div></form></div></div>'),e.put("app/components/authentication/register.html",'<div class=container style="display: block; margin-left: auto; margin-right: auto"><nav class="navbar navbar-static-top navbar-inverse"><div class=navbar-brand></nav><div class="col-md-6 col-md-offset-3"><h2>Register:</h2><form name=form ng-submit=auth.register() role=form><div class=form-group ng-class="{ \'has-error\': form.email.$dirty && form.email.$error.required }"><label for=emailRegister>Email</label><input type=email name=emailRegister id=emailRegister ng-model=auth.email class=form-control required> <span ng-show="form.email.$dirty && form.email.$error.required" class=help-block>Email is required</span></div><div class=form-group ng-class="{ \'has-error\': form.password.$dirty && form.password.$error.required }"><label for=passwordRegister>Password</label><input type=password name=passwordRegister id=passwordRegister ng-model=auth.password class=form-control required> <span ng-show="form.password.$dirty && form.password.$error.required" class=help-block>Password is required</span></div><div class=form-actions><button type=submit class="btn btn-primary">Register</button> <a href=#/ class="btn btn-link">Back</a></div></form></div></div>'),e.put("app/components/navbar/navbar.html",'<nav class="navbar navbar-static-top navbar-inverse"><div class=navbar-header><p class=navbar-brand><span class="glyphicon glyphicon-home"></span></p><a class=navbar-brand ng-href=#register>Register</a> <a class=navbar-brand ng-href=#login>Login</a></div></nav>'),e.put("app/components/dashboard/dashboard.html",'<div class=container style="display: block; margin-left: auto; margin-right: auto"><nav class="navbar navbar-static-top navbar-inverse"><div class=navbar-header><a class="navbar-brand left-top" ng-click=dash.logout()>Logout</a></div></nav><br><br><div class="panel panel-body form-group"><a class="btn btn-link" ng-click="isIncome = !isIncome">Incomes</a></div><div class=row uib-collapse=!isIncome><div class=col-md-12><div class="panel panel-footer" ng-init="style={\'background-color\': \'blue\'}"><div class=panel-body><form><table class="table table-striped table-bordered"><thead><tr><th>Description</th><th>Category</th><th>Amount</th><th></tr></thead><tbody><tr ng-repeat="income in dash.incomeList"><td>{{income.description}}</td><td>{{income.category}}</td><td>{{income.amount}}</td><td><div class=form-group><input type=button class="btn btn-block" ng-click=dash.setOnUpdatingIncome(income) value=Edit> <input type=button class="btn btn-block" ng-click=dash.deleteIncome(income) value=Remove></div></td></tr></tbody></table><div class=form-group><input type=button class="btn btn-primary pull-right" ng-click=dash.setOnAddingIncome() value="Add New"></div></form></div></div></div></div><div class="panel panel-body form-group"><a class="btn btn-link" ng-click="isExpense = !isExpense">Expenses</a></div><div uib-collapse=!isExpense class=row><div class=col-md-12><div class="panel panel-footer"><div class=panel-body><form><table class="table table-striped table-bordered"><thead><tr><th>Description</th><th>Category</th><th>Amount</th><th></tr></thead><tbody><tr ng-repeat="expense in dash.expenseList"><td>{{expense.description}}<br><br><a class="btn btn-link" ng-click="expense.showData = !expense.showData">Notes</a><table uib-collapse=!expense.showData><tbody><tr ng-repeat="note in expense.notes"><td>Note: {{note.text}}</td></tr></tbody></table></td><td>{{expense.category}}</td><td>{{expense.amount}}</td><td><input type=button class="btn btn-block" ng-click=dash.setOnUpdatingExpense(expense) value=Edit> <input type=button class="btn btn-block" ng-click=dash.deleteExpense(expense) value=Remove> <input uib-popover-template=dash.noteUrl type=button class="btn btn-block" ng-click=dash.setOnAddingNote(expense.id) value="Add Note"></td></tr></tbody></table><div class=form-group><input type=button class="btn btn-primary pull-right" ng-click=dash.setOnAddingExpense() value="Add New"></div></form></div></div></div></div><div uib-collapse=!dash.isVisible class="panel col-md-6 col-md-offset-3"><h2>{{dash.type}}</h2><form name=form role=form><div class=form-group><label for=description>Description</label><input type=text name=descritpion id=description ng-model=dash.tableData.description class=form-control required> <span ng-show=form.text.$error.required class=help-block>Description is required</span></div><div class=form-group><label for=category>Category</label><input type=number value=1 name=category id=category ng-model=dash.tableData.category class=form-control required> <span ng-show="form.number.$dirty && form.number.$error.required" class=help-block>Category is required</span></div><div class=form-group><label for=amount>Amount</label><input type=number value=10 step=0.01 name=amount id=amount ng-model=dash.tableData.amount class=form-control required> <span ng-show="form.number.$dirty && form.number.$error.required" class=help-block>Amount is required</span></div><div class=form-actions><button type=submit class="btn btn-primary" ng-click=dash.submit()>Submit</button> <a class="btn btn-link" ng-click=dash.setBackData()>Abort</a></div></form></div></div><script type=text/ng-template id=notePopover.html><div>Adding note</div>\n  <div class="form-group" >\n    <label for="note">Note:</label>\n    <br>\n    <input type="text" name="note" id="note" ng-model="dash.noteData.text" class="form-control" required>\n    <br>\n    <span ng-show="form.text.$dirty && form.text.$error.required" class="help-block">Amount is required</span>\n    <input type="button" class="btn btn-primary" ng-click="dash.addNote()" value="Submit">\n  </div></script>')}]);
//# sourceMappingURL=../maps/scripts/app-e5f41d1fc5.js.map
